{"ast":null,"code":"var _jsxFileName = \"/Users/ksena/\\u041F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435/React/lessons/Shop_1001/client/src/pages/auth/components/ModalLogin.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useContext, useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport { useHttp } from '../../../hooks/http.hook';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { TextFields } from '../../../component/input/Input';\nimport { LoadingCircular } from '../../../component/loading/LoadingCircular';\nimport '../../../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ModalLogin = _ref => {\n  _s();\n\n  let {\n    onClick\n  } = _ref;\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n  const {\n    login\n  } = useContext(AuthContext);\n  const {\n    loading,\n    request,\n    errorsValid\n  } = useHttp();\n  const handlerChange = useCallback(event => setForm(prevForm => ({ ...prevForm,\n    [event.target.name]: event.target.value\n  })), []);\n  const handlerLogin = useCallback(async () => {\n    const data = await request({\n      url: 'auth/login',\n      method: 'POST',\n      body: { ...form\n      }\n    });\n    login({\n      jwtToken: data.token,\n      id: data.id,\n      name: data.name,\n      email: data.email,\n      icon: data.icon,\n      role: data.role\n    });\n  }, [login, form, request]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    noValidate: true,\n    className: \"wrapperLogin\",\n    children: [loading && /*#__PURE__*/_jsxDEV(LoadingCircular, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"LOGIN PAGE\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextFields, {\n      label: \"Email\",\n      type: \"text\",\n      name: \"email\",\n      onChange: handlerChange,\n      errors: errorsValid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextFields, {\n      label: \"Password\",\n      type: \"password\",\n      name: \"password\",\n      onChange: handlerChange,\n      errors: errorsValid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buttonLoginWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        color: \"secondary\",\n        onClick: onClick,\n        children: \"Regestration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: handlerLogin,\n        disabled: loading,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ModalLogin, \"rbyEAuP46ZXLVJddokGntsxNwFM=\", false, function () {\n  return [useHttp];\n});\n\n_c = ModalLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModalLogin\");","map":{"version":3,"names":["React","useCallback","useContext","useState","Button","useHttp","AuthContext","TextFields","LoadingCircular","ModalLogin","onClick","form","setForm","email","password","login","loading","request","errorsValid","handlerChange","event","prevForm","target","name","value","handlerLogin","data","url","method","body","jwtToken","token","id","icon","role"],"sources":["/Users/ksena/Программирование/React/lessons/Shop_1001/client/src/pages/auth/components/ModalLogin.tsx"],"sourcesContent":["import React, { ChangeEvent, FC, useCallback, useContext, useState } from 'react'\nimport { Button } from '@material-ui/core'\n\nimport { useHttp } from '../../../hooks/http.hook';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { TextFields } from '../../../component/input/Input';\nimport { LoadingCircular } from '../../../component/loading/LoadingCircular';\n\nimport '../../../App.css';\n\ntype Props = {\n    onClick: () => void\n}\n\ntype LoginUser = {\n    email: string, \n    password: string, \n}\n\nexport const ModalLogin: FC<Props> = ({ onClick }) => {\n    const [form, setForm] = useState<LoginUser>({ email: '', password: '' })\n\n    const { login } = useContext(AuthContext)\n    \n    const { loading, request, errorsValid } = useHttp()\n\n    const handlerChange = useCallback((event: ChangeEvent<HTMLInputElement>): void => \n        setForm(prevForm => ({ ...prevForm, [event.target.name]: event.target.value }))\n    , []) \n\n    const handlerLogin = useCallback(async() => {\n        const data = await request({ url: 'auth/login', method: 'POST', body: { ...form } })\n        login({\n            jwtToken: data.token,\n            id: data.id,\n            name: data.name,\n            email: data.email,\n            icon: data.icon,\n            role: data.role,\n        })\n    }, [login, form, request])\n        \n    return (\n        <form \n            noValidate \n            className=\"wrapperLogin\"\n        >\n            {loading && <LoadingCircular/>}\n            <h2>LOGIN PAGE</h2> \n            <TextFields\n                label=\"Email\" \n                type=\"text\" \n                name=\"email\" \n                onChange={handlerChange}\n                errors={errorsValid}\n            />\n            <TextFields\n                label=\"Password\" \n                type=\"password\" \n                name=\"password\" \n                onChange={handlerChange}\n                errors={errorsValid}\n            />\n            <div className=\"buttonLoginWrapper\">\n                <Button variant=\"outlined\" color=\"secondary\"  \n                    onClick={onClick}\n                >\n                    Regestration\n                </Button>\n                <Button variant=\"outlined\" color=\"primary\"  \n                    onClick={handlerLogin}\n                    disabled={loading}\n                >\n                    Login\n                </Button>\n            </div>\n        </form>\n    )\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAiCC,WAAjC,EAA8CC,UAA9C,EAA0DC,QAA1D,QAA0E,OAA1E;AACA,SAASC,MAAT,QAAuB,mBAAvB;AAEA,SAASC,OAAT,QAAwB,0BAAxB;AACA,SAASC,WAAT,QAA4B,8BAA5B;AACA,SAASC,UAAT,QAA2B,gCAA3B;AACA,SAASC,eAAT,QAAgC,4CAAhC;AAEA,OAAO,kBAAP;;AAWA,OAAO,MAAMC,UAAqB,GAAG,QAAiB;EAAA;;EAAA,IAAhB;IAAEC;EAAF,CAAgB;EAClD,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAY;IAAEU,KAAK,EAAE,EAAT;IAAaC,QAAQ,EAAE;EAAvB,CAAZ,CAAhC;EAEA,MAAM;IAAEC;EAAF,IAAYb,UAAU,CAACI,WAAD,CAA5B;EAEA,MAAM;IAAEU,OAAF;IAAWC,OAAX;IAAoBC;EAApB,IAAoCb,OAAO,EAAjD;EAEA,MAAMc,aAAa,GAAGlB,WAAW,CAAEmB,KAAD,IAC9BR,OAAO,CAACS,QAAQ,KAAK,EAAE,GAAGA,QAAL;IAAe,CAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBH,KAAK,CAACE,MAAN,CAAaE;EAAjD,CAAL,CAAT,CADsB,EAE/B,EAF+B,CAAjC;EAIA,MAAMC,YAAY,GAAGxB,WAAW,CAAC,YAAW;IACxC,MAAMyB,IAAI,GAAG,MAAMT,OAAO,CAAC;MAAEU,GAAG,EAAE,YAAP;MAAqBC,MAAM,EAAE,MAA7B;MAAqCC,IAAI,EAAE,EAAE,GAAGlB;MAAL;IAA3C,CAAD,CAA1B;IACAI,KAAK,CAAC;MACFe,QAAQ,EAAEJ,IAAI,CAACK,KADb;MAEFC,EAAE,EAAEN,IAAI,CAACM,EAFP;MAGFT,IAAI,EAAEG,IAAI,CAACH,IAHT;MAIFV,KAAK,EAAEa,IAAI,CAACb,KAJV;MAKFoB,IAAI,EAAEP,IAAI,CAACO,IALT;MAMFC,IAAI,EAAER,IAAI,CAACQ;IANT,CAAD,CAAL;EAQH,CAV+B,EAU7B,CAACnB,KAAD,EAAQJ,IAAR,EAAcM,OAAd,CAV6B,CAAhC;EAYA,oBACI;IACI,UAAU,MADd;IAEI,SAAS,EAAC,cAFd;IAAA,WAIKD,OAAO,iBAAI,QAAC,eAAD;MAAA;MAAA;MAAA;IAAA,QAJhB,eAKI;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QALJ,eAMI,QAAC,UAAD;MACI,KAAK,EAAC,OADV;MAEI,IAAI,EAAC,MAFT;MAGI,IAAI,EAAC,OAHT;MAII,QAAQ,EAAEG,aAJd;MAKI,MAAM,EAAED;IALZ;MAAA;MAAA;MAAA;IAAA,QANJ,eAaI,QAAC,UAAD;MACI,KAAK,EAAC,UADV;MAEI,IAAI,EAAC,UAFT;MAGI,IAAI,EAAC,UAHT;MAII,QAAQ,EAAEC,aAJd;MAKI,MAAM,EAAED;IALZ;MAAA;MAAA;MAAA;IAAA,QAbJ,eAoBI;MAAK,SAAS,EAAC,oBAAf;MAAA,wBACI,QAAC,MAAD;QAAQ,OAAO,EAAC,UAAhB;QAA2B,KAAK,EAAC,WAAjC;QACI,OAAO,EAAER,OADb;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAMI,QAAC,MAAD;QAAQ,OAAO,EAAC,UAAhB;QAA2B,KAAK,EAAC,SAAjC;QACI,OAAO,EAAEe,YADb;QAEI,QAAQ,EAAET,OAFd;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QANJ;IAAA;MAAA;MAAA;MAAA;IAAA,QApBJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAoCH,CA3DM;;GAAMP,U;UAKiCJ,O;;;KALjCI,U"},"metadata":{},"sourceType":"module"}