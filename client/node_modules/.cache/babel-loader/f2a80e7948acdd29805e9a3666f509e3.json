{"ast":null,"code":"import { FilterOption } from \"../component/filter-sort/constants\";\nexport const addFilterByOptions = _ref => {\n  let {\n    prevFilter,\n    name,\n    item,\n    type\n  } = _ref;\n  const removeName = Object.fromEntries(Object.entries(prevFilter).filter(option => option[0] !== name));\n\n  if (type === FilterOption.Checkbox) {\n    const prevNameCheckbox = prevFilter[name] || [];\n    const hasItemCheckbox = prevNameCheckbox === null || prevNameCheckbox === void 0 ? void 0 : prevNameCheckbox.find(filterItem => item === filterItem);\n    const removeItemCheckbox = prevNameCheckbox.filter(filterItem => item !== filterItem);\n\n    if (!!hasItemCheckbox) {\n      if (prevNameCheckbox.length > 1) {\n        return { ...prevFilter,\n          [name]: [...removeItemCheckbox]\n        };\n      }\n\n      return { ...removeName\n      };\n    }\n\n    return { ...prevFilter,\n      [name]: [...prevNameCheckbox, item]\n    };\n  }\n\n  if (type === FilterOption.Range) {\n    const prevNameInput = prevFilter[name] || {};\n    const sumItemOptionInput = Object.values({ ...prevNameInput,\n      ...item\n    }).reduce((sum, item) => sum + +item, 0);\n\n    if (sumItemOptionInput === 0) {\n      return removeName;\n    }\n\n    return { ...prevFilter,\n      [name]: { ...prevNameInput,\n        ...item\n      }\n    };\n  }\n\n  return prevFilter;\n};","map":{"version":3,"names":["FilterOption","addFilterByOptions","prevFilter","name","item","type","removeName","Object","fromEntries","entries","filter","option","Checkbox","prevNameCheckbox","hasItemCheckbox","find","filterItem","removeItemCheckbox","length","Range","prevNameInput","sumItemOptionInput","values","reduce","sum"],"sources":["/Users/ksena/Программирование/React/lessons/Shop_1001/client/src/utils/addFilterByOptions.ts"],"sourcesContent":["import { FilterOption } from \"../component/filter-sort/constants\"\nimport { IFilter, RangeFilter } from \"../interface/IFilter\"\n\ntype AddFilterByOptionsType = {\n   prevFilter: IFilter, \n   name: string, \n   item: string | RangeFilter, \n   type: string,\n}\n\nexport const addFilterByOptions = ({ prevFilter, name, item, type }: AddFilterByOptionsType): IFilter => {\n   const removeName = Object.fromEntries(Object.entries(prevFilter).filter(option => option[0] !== name))\n   \n   if (type === FilterOption.Checkbox) {\n      const prevNameCheckbox = prevFilter[name as keyof IFilter] as string[] || []\n      const hasItemCheckbox = prevNameCheckbox?.find((filterItem) => item === filterItem)\n      const removeItemCheckbox = prevNameCheckbox.filter((filterItem) => item !== filterItem)\n\n      if (!!hasItemCheckbox) {\n         if (prevNameCheckbox.length > 1) {\n            return { ...prevFilter, [name]: [ ...removeItemCheckbox ] }\n         }\n         return { ...removeName } \n      }\n      return { ...prevFilter, [name]: [...prevNameCheckbox, item] }\n   }\n    \n   if (type === FilterOption.Range) {\n      const prevNameInput = prevFilter[name as keyof IFilter] as RangeFilter || {} \n      const sumItemOptionInput = Object.values({ ...prevNameInput, ...item as RangeFilter } as string[])\n         .reduce((sum: number, item: string) => sum + +item, 0)\n      \n      if (sumItemOptionInput === 0) {\n         return removeName\n      }\n      return { ...prevFilter, [name]: { ...prevNameInput, ...item as RangeFilter } }\n   }\n\n   return prevFilter\n}\n"],"mappings":"AAAA,SAASA,YAAT,QAA6B,oCAA7B;AAUA,OAAO,MAAMC,kBAAkB,GAAG,QAAuE;EAAA,IAAtE;IAAEC,UAAF;IAAcC,IAAd;IAAoBC,IAApB;IAA0BC;EAA1B,CAAsE;EACtG,MAAMC,UAAU,GAAGC,MAAM,CAACC,WAAP,CAAmBD,MAAM,CAACE,OAAP,CAAeP,UAAf,EAA2BQ,MAA3B,CAAkCC,MAAM,IAAIA,MAAM,CAAC,CAAD,CAAN,KAAcR,IAA1D,CAAnB,CAAnB;;EAEA,IAAIE,IAAI,KAAKL,YAAY,CAACY,QAA1B,EAAoC;IACjC,MAAMC,gBAAgB,GAAGX,UAAU,CAACC,IAAD,CAAV,IAAiD,EAA1E;IACA,MAAMW,eAAe,GAAGD,gBAAH,aAAGA,gBAAH,uBAAGA,gBAAgB,CAAEE,IAAlB,CAAwBC,UAAD,IAAgBZ,IAAI,KAAKY,UAAhD,CAAxB;IACA,MAAMC,kBAAkB,GAAGJ,gBAAgB,CAACH,MAAjB,CAAyBM,UAAD,IAAgBZ,IAAI,KAAKY,UAAjD,CAA3B;;IAEA,IAAI,CAAC,CAACF,eAAN,EAAuB;MACpB,IAAID,gBAAgB,CAACK,MAAjB,GAA0B,CAA9B,EAAiC;QAC9B,OAAO,EAAE,GAAGhB,UAAL;UAAiB,CAACC,IAAD,GAAQ,CAAE,GAAGc,kBAAL;QAAzB,CAAP;MACF;;MACD,OAAO,EAAE,GAAGX;MAAL,CAAP;IACF;;IACD,OAAO,EAAE,GAAGJ,UAAL;MAAiB,CAACC,IAAD,GAAQ,CAAC,GAAGU,gBAAJ,EAAsBT,IAAtB;IAAzB,CAAP;EACF;;EAED,IAAIC,IAAI,KAAKL,YAAY,CAACmB,KAA1B,EAAiC;IAC9B,MAAMC,aAAa,GAAGlB,UAAU,CAACC,IAAD,CAAV,IAAoD,EAA1E;IACA,MAAMkB,kBAAkB,GAAGd,MAAM,CAACe,MAAP,CAAc,EAAE,GAAGF,aAAL;MAAoB,GAAGhB;IAAvB,CAAd,EACvBmB,MADuB,CAChB,CAACC,GAAD,EAAcpB,IAAd,KAA+BoB,GAAG,GAAG,CAACpB,IADtB,EAC4B,CAD5B,CAA3B;;IAGA,IAAIiB,kBAAkB,KAAK,CAA3B,EAA8B;MAC3B,OAAOf,UAAP;IACF;;IACD,OAAO,EAAE,GAAGJ,UAAL;MAAiB,CAACC,IAAD,GAAQ,EAAE,GAAGiB,aAAL;QAAoB,GAAGhB;MAAvB;IAAzB,CAAP;EACF;;EAED,OAAOF,UAAP;AACF,CA7BM"},"metadata":{},"sourceType":"module"}